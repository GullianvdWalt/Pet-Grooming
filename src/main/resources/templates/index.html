<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>@Home Mobile Pet Grooming</title>
  <!-- Window Icon -->
  <link rel="icon" href="/icons/icon.ico">
  <!-- JQuery -->
  <script src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <!--    Styles     -->
  <link rel="stylesheet" th:href="@{/css/styles-all.css}" />
  <link rel="stylesheet" th:href="@{/css/index.css}" />
  <link rel="stylesheet" th:href="@{/css/fragments/partials.css}" />
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />
  <!-- For Colapsing Menu -->
  <link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
</head>

<body>
  <header th:insert="fragments/header :: header">
    <!-- Header Included With Fragments -->
  </header>

  <!-- Content Section Start -->
  <div class="content-section">

    <nav th:insert="fragments/navbar :: navbar" id="sideNav">
      <!-- Navigation Included With Fragments -->
    </nav>

    <!-- Content Container Start -->
    <div class="content-container" id="contentContainer">

      <!-- Schedule Container Start -->

      <div class="schedule-container">
        <!-- Schedule Container Head -->
        <div class="schedule-head-container">
          <img src="/icons/schedule.jpg" alt="schedule" class="schedule-icon" />
          <h2 class="schedule-head">Appointments</h2>
        </div>
        <!-- Messages -->
        <div class="success-messages">
          <h1 th:text="${success}" th:if="${success}"></h1>
        </div>
        <!-- Messages -->
        <div class="error-messages">
          <h1 th:text="${error}" th:if="${error}"></h1>
        </div>
        <!-- Schedule Container Table -->
        <div class="schedule-table-container" th:if="!${#lists.isEmpty(appointmentList)}">
          <table >
            <thead>
              <tr>
               <th colspan="2">Date</th>
               <th>Customer Details</th>
               <th>Pet Details</th>
                <th>Service Details</th>
                <th colspan="2">Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr class="schedule-row" th:each="appointments: ${appointmentList}">
                <td class="app-date-col" th:text="${#dates.dayOfWeekName(appointments.app_date_time)}"></td>
                  <td class="app-date-col" th:text="${#dates.format(appointments.app_date_time,'dd-MM-yyyy HH-mm')}"></td>
                <td class="schedule-details" th:text="|${appointments.pet_owner_full_name} - ${appointments.pet_owner_cell} - ${appointments.pet_owner_address}|">
                </td>
                <td class="schedule-details" th:text="|${appointments.pet_name} - ${appointments.pet_breed}|">
                </td>
                <td class="schedule-details" >
                  <span th:each="services,iterStat : ${appointments.services}">
                    <span th:text="${services.service_name}"/><th:block th:if="${!iterStat.last}">,</th:block>
                  </span>
                </td>
                <td class="delete-appointment-col">
                  <a th:href="@{/delete/appointment/{id}(id = ${appointments.app_id})}" id="deleteAppointment">
                    <img src="/icons/trash.png" alt="delete" class="icon" id="deleteIcon" title="Delete Appointment" />
                  </a>
                </td>
                  <td class="select-column">
                    <a th:href="@{/appointmentComplete/{id}(id = ${appointments.app_id})}" id="appSelect" class="app-select">Done</a>
                  </td>
              </tr>
            </tbody>
          </table>
        </div>
              <div th:if="${#lists.isEmpty(appointmentList)}">
                <span colspan="8" class="empty-appointments-table-text"> <h3>There are currently no appointments.</h3></span>
              </div>
      </div>
      <!-- Schedule Container End -->


          <!-- Delete Appointment Modal Starts -->
          <div class="delete-modal" id="appDeleteModal">
            <div class="delete-modal-container">
              <div class="delete-modal-header">
                <h3>Confirm Delete</h3>
              </div>
              <div class="delete-modal-body">
                <h4>Are you sure you want to delete this appointment?</h4>
              </div>
              <div class="delete-modal-footer">
                <a href="#" class="buttons" id="confirmAppDelete">Yes, delete</a>
                <a href="#" class="buttons" id="appCancel">Cancel</a>
              </div>
            </div>
          </div>
          <!-- Delete Appointment Modal Ends -->

    </div>
    <!-- Schedule Section  End -->
  </div>
  <footer th:insert="fragments/footer :: footer">
    <!-- Footer Included With Fragments -->
  </footer>
  <!-- Scripts  -->
  <script th:src="@{/js/index.js}"></script>
  <script th:src="@{/js/sidenav.js}"></script>
</body>


</html>

